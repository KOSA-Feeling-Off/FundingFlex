<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fundingflex.mybatismapper.mapper.FundingsMapper">

  <!-- 펀딩 정보 조회 -->
	<select id="selectFundingInfo" resultType="com.fundingflex.funding.domain.dto.dto.FundingsInfoDto">
        SELECT f.category_id        categoryId
             , f.category_name      categoryName
             , f.fundings_id        fundingsId
             , f.title              title
             , f.content            content
             , f.goal_amount        goalAmount
             , f.status_flag        statusFlag
             , NVL(fc.collected_amount, 0)  collectedAmount
             , NVL(fc.percent,0)           percent
          FROM fundings             f
     LEFT JOIN funding_conditions   fc
            ON f.fundings_id        = fc.fundings_id
         WHERE f.category_id        = #{categoryId}
           AND f.fundings_id        = #{fundingsId}
  </select>


</mapper>